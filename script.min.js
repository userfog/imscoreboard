function createCORSRequest(e,t){var n=new XMLHttpRequest;if("withCredentials"in n){n.open(e,t,true)}else if(typeof XDomainRequest!="undefined"){n=new XDomainRequest;n.open(e,t)}else{n=null}return n}function makeCorsRequest(e){var t=createCORSRequest("GET",e);if(!t){alert("CORS not supported");return}t.onload=function(){var e=t.responseText;main(e)};t.onerror=function(){alert("Woops, there was an error making the request.")};t.send()}function convert_row(e,t){var n={};t=t.split(",");$.each(t,function(r,i){n[JSON.parse(e[r])]=JSON.parse(t[r])});return n}function down(){app.inc();$("section").eq(app.selectorIndex).addClass("active");var e=$("section.active");$("html, body").animate({scrollTop:$(".active").offset().top},200);e.removeClass("active")}function up(){var e=$("section.active");e.removeClass("active");app.dec();if(app.selectorIndex==-1){$("html, body").animate({scrollTop:$("div:first").offset().top},200)}else{$("section").eq(app.selectorIndex).addClass("active");$("html, body").animate({scrollTop:$(".active").offset().top},200)}}function snap_to_section(){window.addEventListener("keyup",function(e){if(e.keyCode==40){down()}if(e.keyCode==38){up()}})}function main(e){obs=[];e=e.trim();e=e.split("\n");headers=$.map(e[0].split(","),function(e,t){return e.toLowerCase()});e.shift();$.each(e,function(e,t){var n=convert_row(headers,t);obs.push(n)});obs.sort(function(e,t){return t.total-e.total});var t=$("#iso");$.each(obs,function(e,n){s=n.house+".png";var r='<a href="#'+n.house+'"><img height="60" width="47" src='+'"'+s+'"'+"></a>";t.append(r)});var n=$("#container");$.each(obs,function(e,t){var r='<section id="'+t.house+'">'+'<div class="houseContainer">'+'<span class="houseInfo">'+t.house+"</br>"+t.total+"</span>"+"</div>"+"</section>";n.append(r)});$.each(obs,function(e,t){bkg="rsz_"+t.house+"_bkgrd.jpg";var n="#"+t.house;$(n).backstretch(bkg)});snap_to_section();jQuery(".houseContainer").fitText(1.2,{maxFontSize:"90px"});setTimeout(function(){NProgress.done()},2e3)}function setup(){NProgress.start();$.support.cors=true;var e="https://spreadsheets.google.com/tq?tqx=out:csv&tq=select *&key=0AgMRIqC2ExQudHAyX0sycXdac2dxb0pWSTlndS1RRGc";makeCorsRequest(e);$("#bigtext").fitText(.65,{maxFontSize:"120px"})}var app={selectorIndex:-1,numTeams:13,lastScrollTop:0,doScroll:true,inc:function(){this.selectorIndex=Math.min(12,this.selectorIndex+1)},dec:function(){this.selectorIndex=Math.max(-1,this.selectorIndex-1)}};$(document).ready(setup)